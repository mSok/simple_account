# Сервис Account
Выполнено в качестве тестового задания и просто для самооразвития

## Сервис умеет:
* хранить информацию о состоянии счета абонента
* производить операции с счетом абонента
* по запросу выдавать текущие параметры счета абонента


## Методы API

- /api/ping (работоспособность сервиса)

- /api/add (пополнение баланса)

- /api/substract (уменьшение баланса)

- /api/status (остаток по балансу, открыт счет или закрыт)

## Функциональность

- При выполнении операции уменьшения баланса проверяем условие что, операция возможна (размер холда + сумма вычета
меньше баланса на счете абонента)

- Каждые 10 минут производить списание холда со счета

- Обмен данными с сервисо производится в виде json сообщений:
    ```python
    {
        “status“ = <http_status>,
        “result“: <bool:operation_status>,
        “addition“: {},
        “description“: {}
    }
    ```

## Тестовые данные
Uuid | ФИО | Баланс | Холд | Статус
--- | --- | --- | --- | ---
26c940a1-7228-4ea2-a3bc-e6460b172040 | Петров Иван Сергеевич | 1700 | 300 | открыт
7badc8f8-65bc-449a-8cde-855234ac63e1 | Kazitsky Jason | 200 | 200 | открыт
5597cc3d-c948-48a0-b711-393edf20d9c0 | Пархоменко Антон Александрович | 10 | 300 | открыт
867f0924-a917-4711-939b-90b179a96392 | Петечкин Петр Измаилович |1000000 | 1 | закрыт

## Запуск сервиса
    $ docker-compose up


 По умолчанию запускается NGINX на 80 порту(нужно убедится что порт свободен), можно проверить работоспособность по ссылке:
 http://127.0.0.1/api/ping


## Параметры которые можно передать через переменные окружение
- DB_HOST - хост Postgres базы данных ( по умолчанию postgres)
- DB_NAME - имя базы данных ( по умолчанию account)
- DB_USER - пользователь Postgres ( по умолчанию postgres)
- DB_PASSWORD - пароль от БД (нету по умолчанию)
- LOG - уровень логирования в формате стандартного модуля logging( по умолчанию WARNING)


пример запуска с параметрами:

    $ DB_HOST=postgres docker-compose up
